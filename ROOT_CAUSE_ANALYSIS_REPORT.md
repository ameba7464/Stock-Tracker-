# üî¨ –û–¢–ß–Å–¢: –ê–Ω–∞–ª–∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –ø—Ä–∏—á–∏–Ω—ã —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö

**–î–∞—Ç–∞:** 28 –æ–∫—Ç—è–±—Ä—è 2025  
**–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã:**
- CSV –æ—Ç Wildberries: `28-10-2025 –ò—Å—Ç–æ—Ä–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤ —Å 22-10-2025 –ø–æ 28-10-2025_export (1).csv`
- Google Sheets: `Stock Tracker - Stock Tracker (5).csv`

---

## üéØ –†–ï–ó–Æ–ú–ï: –ù–∞–π–¥–µ–Ω–∞ –∫–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞!

### ‚úÖ –§—É–Ω–∫—Ü–∏—è `is_real_warehouse()` –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û
–°–∫–ª–∞–¥ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å" **–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç—Å—è** –∫–∞–∫ —Ä–µ–∞–ª—å–Ω—ã–π —Å–∫–ª–∞–¥:
```
is_real_warehouse('–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å') = True ‚úÖ
is_real_warehouse('Marketplace') = True ‚úÖ
is_real_warehouse('–û–±—É—Ö–æ–≤–æ –ú–ü') = True ‚úÖ
```

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê: CSV –æ—Ç Wildberries —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–∫–ª–∞–¥ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å", –Ω–æ –æ–Ω –ù–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ Google Sheets!

---

## üìä –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –†–ê–°–•–û–ñ–î–ï–ù–ò–ô

### –¢–æ–≤–∞—Ä 1: **Its1_2_3/50g** (–ê—Ä—Ç–∏–∫—É–ª WB: 163383326)

| –ò—Å—Ç–æ—á–Ω–∏–∫ | –ó–∞–∫–∞–∑—ã | –û—Å—Ç–∞—Ç–∫–∏ |
|----------|--------|---------|
| WB CSV   | 98     | **3458** |
| Google Sheets | 106 | **475** |
| **–†–∞–∑–Ω–∏—Ü–∞** | -8 (-8%) | **+2983 (+628%)** ‚ö†Ô∏è |

#### –°–∫–ª–∞–¥—ã –í WB CSV, –ù–û –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ Google Sheets:
1. **–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å**: –ó–∞–∫–∞–∑—ã=5, **–û—Å—Ç–∞—Ç–∫–∏=2984** üö®
2. –ù–æ–≤–æ—Å–µ–º–µ–π–∫–∏–Ω–æ: –ó–∞–∫–∞–∑—ã=14, –û—Å—Ç–∞—Ç–∫–∏=87
3. –ö–æ–ª–µ–¥–∏–Ω–æ: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0
4. –û–±—É—Ö–æ–≤–æ: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0
5. –°–¶ –ò–∂–µ–≤—Å–∫: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0
6. –ß–µ–±–æ–∫—Å–∞—Ä—ã 2: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0

**–ö–†–ò–¢–ò–ß–ù–û:** –°–∫–ª–∞–¥ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å" —Å–æ–¥–µ—Ä–∂–∏—Ç **86%** –≤—Å–µ—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤ (2984 –∏–∑ 3458), –Ω–æ –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü—É!

---

### –¢–æ–≤–∞—Ä 2: **Its2/50g** (–ê—Ä—Ç–∏–∫—É–ª WB: 163383327)

| –ò—Å—Ç–æ—á–Ω–∏–∫ | –ó–∞–∫–∞–∑—ã | –û—Å—Ç–∞—Ç–∫–∏ |
|----------|--------|---------|
| WB CSV   | 71     | **2512** |
| Google Sheets | 79 | **493** |
| **–†–∞–∑–Ω–∏—Ü–∞** | -8 (-10%) | **+2019 (+409%)** ‚ö†Ô∏è |

#### –°–∫–ª–∞–¥—ã –í WB CSV, –ù–û –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ Google Sheets:
1. **–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å**: –ó–∞–∫–∞–∑—ã=0, **–û—Å—Ç–∞—Ç–∫–∏=2019** üö®
2. –ù–æ–≤–æ—Å–µ–º–µ–π–∫–∏–Ω–æ: –ó–∞–∫–∞–∑—ã=1, –û—Å—Ç–∞—Ç–∫–∏=0
3. –ö–æ–ª–µ–¥–∏–Ω–æ: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0
4. –°–¶ –•–∞–±–∞—Ä–æ–≤—Å–∫: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0
5. –°–¶ –ö—É–∑–Ω–µ—Ü–∫: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0
6. –ë–µ–ª–∞—è –¥–∞—á–∞: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0
7. –û—Å—Ç–∞–ª—å–Ω—ã–µ: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0
8. –ü—è—Ç–∏–≥–æ—Ä—Å–∫, –≠—Ç–æ–∫–∞: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0
9. –°–æ—Ñ—å–∏–Ω–æ: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0

**–ö–†–ò–¢–ò–ß–ù–û:** –°–∫–ª–∞–¥ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å" —Å–æ–¥–µ—Ä–∂–∏—Ç **80%** –≤—Å–µ—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤ (2019 –∏–∑ 2512), –Ω–æ –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü—É!

---

### –¢–æ–≤–∞—Ä 3: **ItsSport2/50g** (–ê—Ä—Ç–∏–∫—É–ª WB: 163383328)

| –ò—Å—Ç–æ—á–Ω–∏–∫ | –ó–∞–∫–∞–∑—ã | –û—Å—Ç–∞—Ç–∫–∏ |
|----------|--------|---------|
| WB CSV   | 26     | **1263** |
| Google Sheets | 35 | **248** |
| **–†–∞–∑–Ω–∏—Ü–∞** | -9 (-26%) | **+1015 (+410%)** ‚ö†Ô∏è |

#### –°–∫–ª–∞–¥—ã –í WB CSV, –ù–û –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ Google Sheets:
1. **–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å**: –ó–∞–∫–∞–∑—ã=1, **–û—Å—Ç–∞—Ç–∫–∏=1016** üö®
2. –ù–æ–≤–æ—Å–µ–º–µ–π–∫–∏–Ω–æ: –ó–∞–∫–∞–∑—ã=1, –û—Å—Ç–∞—Ç–∫–∏=69
3. –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –õ–µ–Ω–∏–Ω–∞ 77: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0
4. –í–Ω—É–∫–æ–≤–æ: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0
5. –í–æ—Ä–æ–Ω–µ–∂ WB: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0
6. –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥ - –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã–π 12: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0
7. –ö–∞–∑–∞–Ω—å: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0
8. –ö–æ–ª–µ–¥–∏–Ω–æ: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0
9. –û—Å—Ç–∞–ª—å–Ω—ã–µ: –ó–∞–∫–∞–∑—ã=1, –û—Å—Ç–∞—Ç–∫–∏=0
10. –í–Ω—É–∫–æ–≤–æ: –ó–∞–∫–∞–∑—ã=0, –û—Å—Ç–∞—Ç–∫–∏=0

**–ö–†–ò–¢–ò–ß–ù–û:** –°–∫–ª–∞–¥ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å" —Å–æ–¥–µ—Ä–∂–∏—Ç **80%** –≤—Å–µ—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤ (1016 –∏–∑ 1263), –Ω–æ –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü—É!

---

## üîç –ê–ù–ê–õ–ò–ó: –ü–æ—á–µ–º—É —Å–∫–ª–∞–¥ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å" –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è?

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –≥–∏–ø–æ—Ç–µ–∑—ã:

#### ‚ùå –ì–∏–ø–æ—Ç–µ–∑–∞ 1: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–µ–π `is_real_warehouse()`
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–ü–†–û–í–ï–†–ì–ù–£–¢–ê
```python
is_real_warehouse('–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å') = True ‚úÖ
```
–§—É–Ω–∫—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Å–∫–ª–∞–¥ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å" –∫–∞–∫ —Ä–µ–∞–ª—å–Ω—ã–π.

#### ‚ùå –ì–∏–ø–æ—Ç–µ–∑–∞ 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–∫–ª–∞–¥–∞ –≤ API
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–ü–†–û–í–ï–†–ì–ù–£–¢–ê  
CSV –æ—Ç Wildberries —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å", –∫–æ—Ç–æ—Ä–æ–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π.

#### ‚úÖ –ì–∏–ø–æ—Ç–µ–∑–∞ 3: **–ü–†–û–ë–õ–ï–ú–ê –í –¶–ï–ü–û–ß–ö–ï –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò**
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ê

---

## üö® –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê

### –ü—Ä–æ–±–ª–µ–º–∞ –≤ –º–µ—Ç–æ–¥–µ `sync_from_api_to_sheets()`

**–§–∞–π–ª:** `src/stock_tracker/services/product_service.py`  
**–ú–µ—Ç–æ–¥:** `sync_from_api_to_sheets()`

#### –¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:

1. **–®–∞–≥ 1**: Fetch –¥–∞–Ω–Ω—ã—Ö –∏–∑ API Wildberries
   - Orders API v1 (`/api/v1/supplier/orders`)
   - Warehouse API v1 (`/api/v1/warehouse_remains`)

2. **–®–∞–≥ 2**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ `_process_api_record()`
   - –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –∫–∞–∂–¥–æ–º—É —Ç–æ–≤–∞—Ä—É
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∫–ª–∞–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `is_real_warehouse()`
   - –°–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç `Warehouse` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∫–ª–∞–¥–∞

3. **–®–∞–≥ 3**: –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
   - –°—É–º–º–∏—Ä—É–µ—Ç –æ—Å—Ç–∞—Ç–∫–∏ –∏ –∑–∞–∫–∞–∑—ã
   - –§–æ—Ä–º–∏—Ä—É–µ—Ç –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ —è—á–µ–π–∫–∏ –¥–ª—è Google Sheets

### üî¥ –ì–î–ï –¢–ï–†–Ø–Æ–¢–°–Ø –î–ê–ù–ù–´–ï?

**–î–≤–∞ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –º–µ—Å—Ç–∞ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö:**

#### A. API Wildberries –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–∫–ª–∞–¥ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å"
**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –í–´–°–û–ö–ê–Ø üî¥

CSV —Ñ–∞–π–ª—ã –≤—ã–≥—Ä—É–∂–∞—é—Ç—Å—è **–≤—Ä—É—á–Ω—É—é –∏–∑ –õ–ö Wildberries** –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ **–ù–ï –î–û–°–¢–£–ü–ù–´ —á–µ—Ä–µ–∑ API**.

**–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞:**
- CSV —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–∫–ª–∞–¥ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å" —Å –æ–≥—Ä–æ–º–Ω—ã–º–∏ –æ—Å—Ç–∞—Ç–∫–∞–º–∏
- Google Sheets (–¥–∞–Ω–Ω—ã–µ –∏–∑ API) –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç —ç—Ç–æ—Ç —Å–∫–ª–∞–¥
- –§—É–Ω–∫—Ü–∏—è `is_real_warehouse()` —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

#### B. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ API –∫–ª–∏–µ–Ω—Ç–∞
**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –°–†–ï–î–ù–Ø–Ø üü°

–í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏ `warehouse_remains` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–∫–ª—é—á–∞—é—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å–∫–ª–∞–¥ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å".

---

## üî¨ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ù–ê–•–û–î–ö–ò

### 1. –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –≤ –∑–∞–∫–∞–∑–∞—Ö

–ü–æ–º–∏–º–æ –æ—Å—Ç–∞—Ç–∫–æ–≤, —Ç–∞–∫–∂–µ –µ—Å—Ç—å —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –≤ –∑–∞–∫–∞–∑–∞—Ö:

| –¢–æ–≤–∞—Ä | WB CSV | Google Sheets | –†–∞–∑–Ω–∏—Ü–∞ |
|-------|--------|---------------|---------|
| Its1_2_3/50g | 98 | 106 | **-8** |
| Its2/50g | 71 | 79 | **-8** |
| ItsSport2/50g | 26 | 35 | **-9** |

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –†–∞–∑–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã –≤—ã–±–æ—Ä–∫–∏ (CSV: 22-28 –æ–∫—Ç—è–±—Ä—è, API: –Ω–∞—á–∞–ª–æ –Ω–µ–¥–µ–ª–∏)
2. –†–∞–∑–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö (CSV: Analytics, API: Orders v1)
3. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ—Ç–º–µ–Ω—ë–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –≤ API

### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π –Ω–∞–∑–≤–∞–Ω–∏–π —Å–∫–ª–∞–¥–æ–≤

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∫–ª–∞–¥—ã –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –≤ CSV –∏ Google Sheets:
- CSV: "–ù–æ–≤–æ—Å–µ–º–µ–π–∫–∏–Ω–æ" ‚Üí Sheets: "–°–∞–º–∞—Ä–∞ (–ù–æ–≤–æ—Å–µ–º–µ–π–∫–∏–Ω–æ)"
- CSV: "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥ - –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã–π 12" ‚Üí Sheets: "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥ - –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã–π 12" (—Å–æ–≤–ø–∞–¥–∞—é—Ç)

–≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é —Å–∫–ª–∞–¥–æ–≤ –∏–ª–∏ –ø–æ—Ç–µ—Ä–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏.

---

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ

### üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ API

#### –ó–∞–¥–∞—á–∞ 1.1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç API Wildberries
```python
# –°–æ–∑–¥–∞—Ç—å debug —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ warehouse_remains API
async def debug_marketplace_warehouse():
    client = WildberriesAPIClient(config)
    
    # –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
    task_id = await client.create_warehouse_remains_task()
    
    # –î–æ–∂–¥–∞—Ç—å—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    await asyncio.sleep(60)
    
    # –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
    data = await client.download_warehouse_remains(task_id)
    
    # –ù–∞–π—Ç–∏ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å"
    for item in data:
        for warehouse in item.get('warehouses', []):
            if '–º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å' in warehouse.get('warehouseName', '').lower():
                print(f"FOUND: {warehouse}")
```

**–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- **–ï—Å–ª–∏ API –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å"** ‚Üí –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ Wildberries API
- **–ï—Å–ª–∏ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å"** ‚Üí –ü—Ä–æ–±–ª–µ–º–∞ –≤ –Ω–∞—à–µ–º –∫–æ–¥–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏

#### –ó–∞–¥–∞—á–∞ 1.2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏
```python
# –í —Ñ–∞–π–ª–µ: src/stock_tracker/api/client.py
# –ú–µ—Ç–æ–¥: create_warehouse_remains_task()

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
task_params = {
    "locale": "ru",
    "groupByNm": True,  # –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ nmId
    "groupBySa": True,  # –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ supplierArticle
    # –í–æ–∑–º–æ–∂–Ω–æ, –µ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–∫–ª–∞–¥–æ–≤?
}
```

### üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Marketplace API v3 (FBS)
```python
# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π API —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è FBS (Fulfillment by Seller) —Ç–æ–≤–∞—Ä–æ–≤
# https://seller.wildberries.ru/ns/fbs/fbo-stocks-api

async def fetch_marketplace_stocks():
    """–ü–æ–ª—É—á–∏—Ç—å –æ—Å—Ç–∞—Ç–∫–∏ —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —Å–∫–ª–∞–¥–æ–≤ —á–µ—Ä–µ–∑ Marketplace API."""
    # –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤ API
    pass
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ü–∞—Ä—Å–∏–Ω–≥ CSV —Ñ–∞–π–ª–æ–≤
```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏ –ø–∞—Ä—Å–∏—Ç—å CSV –æ—Ç—á—ë—Ç—ã –∏–∑ –õ–ö Wildberries
# –û–±—ä–µ–¥–∏–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ API + CSV –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω—ã
```

### üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

#### –ó–∞–¥–∞—á–∞ 3.1: –î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```python
# –í –º–µ—Ç–æ–¥–µ _process_api_record()
logger.info(f"Processing product {vendor_code} (nmId: {nm_id})")
logger.info(f"  Warehouses in API response: {len(api_record.get('warehouses', []))}")

for wh in api_record.get('warehouses', []):
    wh_name = wh.get('warehouseName')
    is_real = is_real_warehouse(wh_name)
    logger.info(f"  - {wh_name}: is_real={is_real}, stock={wh.get('quantity')}")
```

#### –ó–∞–¥–∞—á–∞ 3.2: –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫—É "–ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —Å–∫–ª–∞–¥–æ–≤"
```python
# –°—á—ë—Ç—á–∏–∫ —Å–∫–ª–∞–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã
skipped_warehouses_count = 0
skipped_warehouses_list = []

if not is_real_warehouse(warehouse_name):
    skipped_warehouses_count += 1
    skipped_warehouses_list.append(warehouse_name)
    logger.debug(f"Skipping warehouse: {warehouse_name}")
```

---

## üèÅ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –®–∞–≥ 1: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–í—Ä–µ–º—è: 15 –º–∏–Ω—É—Ç)
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å debug —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ API
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `warehouse_remains`
3. –£–±–µ–¥–∏—Ç—å—Å—è –µ—Å—Ç—å –ª–∏ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å" –≤ –æ—Ç–≤–µ—Ç–µ API

### –®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–í—Ä–µ–º—è: 30-60 –º–∏–Ω—É—Ç)
**–°—Ü–µ–Ω–∞—Ä–∏–π A: API –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å"**
- –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å fallback –Ω–∞ CSV –ø–∞—Ä—Å–∏–Ω–≥
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

**–°—Ü–µ–Ω–∞—Ä–∏–π B: API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç, –Ω–æ –∫–æ–¥ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç**
- –ù–∞–π—Ç–∏ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –º–µ—Å—Ç–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å" –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –≤—Å—é —Ü–µ–ø–æ—á–∫—É

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–í—Ä–µ–º—è: 15 –º–∏–Ω—É—Ç)
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Google Sheets
3. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å" –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç

### –®–∞–≥ 4: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–ü–æ—Å—Ç–æ—è–Ω–Ω–æ)
1. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫—É "–û—Å—Ç–∞—Ç–∫–∏ –Ω–∞ –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å"
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ = 0
3. –†–µ–≥—É–ª—è—Ä–Ω–∞—è —Å–≤–µ—Ä–∫–∞ —Å CSV –æ—Ç—á—ë—Ç–∞–º–∏

---

## üìù –í–´–í–û–î–´

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
1. –§—É–Ω–∫—Ü–∏—è `is_real_warehouse()` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Å–∫–ª–∞–¥ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å"
2. –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–∫–ª–∞–¥–æ–≤ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å"
3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–∫–ª–∞–¥–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### ‚ùå –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. **–ö–†–ò–¢–ò–ß–ù–û:** –°–∫–ª–∞–¥ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å" –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ Google Sheets
2. –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç 80%+ –æ—Å—Ç–∞—Ç–∫–æ–≤ –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
3. –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –≤ –∑–∞–∫–∞–∑–∞—Ö (–≤–æ–∑–º–æ–∂–Ω–æ, —Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã)

### üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. **–ù–ï–ú–ï–î–õ–ï–ù–ù–û:** –ó–∞–ø—É—Å—Ç–∏—Ç—å debug —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ API
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–æ–±–ª–µ–º—ã (API –∏–ª–∏ –∫–æ–¥)
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
4. –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

---

**–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–π—Å—Ç–≤–∏—é! –û–∂–∏–¥–∞—é –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π.**
