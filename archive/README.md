# Archive Structure

Этот каталог содержит исторические, вспомогательные и одноразовые скрипты, отчёты и демо, вынесенные из корня репозитория для уменьшения шума.

## Структура

- `analysis/` — все скрипты `analyze_*.py`, сравнения `compare_*.py`, финальные/временные сравнительные отчёты.
- `checks/` — скрипты проверки `check_*.py` (разовые аудиты структуры, заголовков, форматирования).
- `debug/` — отладочные и диагностические: `debug_*.py`, `diagnose_*.py`.
- `fixes/` — одноразовые исправления данных: `fix_*.py`, `quick_fix_warehouse_data.py`, `prepare_order_fix.py`, `restore_warehouse_data.py`, `clean_warehouse_data.py`.
- `verification/` — финальные/ручные проверки: `verify_*.py`, `final_verification*.py`.
- `tests/` — нестандартные тестаподобные файлы, не входящие в регулярный pytest регресс: `test_problematic_articles.py`, `test_warehouse_normalization.py`, `run_all_tests.py`.
- `demo/` — демонстрации и визуализации: `simulate_correct_table.py`, `simple_table_analyzer.py`, `show_analysis_summary.py`, `show_expected_changes.py`.
- `legacy/` — устаревшие версии (например, `*_v2.py`, старые варианты сравнений, сохранённые для истории).
- `misc/` — прочее, что не попадает в вышеперечисленные категории.

## Политика хранения

1. В корне остаётся только актуальный исполняемый код (синхронизация, актуальные фиксы, ядро в `src/`).
2. Любой скрипт, не вызываемый напрямую и не импортируемый ядром, переносится сюда.
3. Перед добавлением нового временного скрипта — создавайте его сразу в нужной подпапке архива.
4. Удаляемые артефакты (логи, временные JSON, CSV выгрузки) не должны попадать в Git: добавляйте шаблоны в `.gitignore`.

## Удаление кандидатных файлов

Список файлов «кандидатов на удаление» фиксируется в корне (`CLEANUP_PLAN.md`) либо комментарием к PR. После подтверждения — удаляются.

## Добавление нового материала

| Тип                          | Куда класть                |
|------------------------------|----------------------------|
| Разовый аудит API            | `analysis/`                |
| Проверка структуры таблицы   | `checks/`                  |
| Отладка формирования данных  | `debug/`                   |
| Исправление остатков         | `fixes/`                   |
| Верификация результата       | `verification/`            |
| Демо / визуализация          | `demo/`                    |
| Устаревший скрипт            | `legacy/`                  |

## Зачем это нужно

- Уменьшение шума в PR и обзорах.
- Быстрая навигация по актуальному коду.
- Ясная граница между «продуктовым» кодом и одноразовыми инструментами.

## Рекомендации по дальнейшей чистке

- Консолидировать многочисленные отчёты в один `docs/HISTORY.md`.
- Регулярно пересматривать `legacy/` и удалять то, что не несёт исторической ценности.
- Автоматизировать перенос через скрипт (см. `tools/restructure_archive.ps1`).
