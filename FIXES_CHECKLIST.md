# üîß –ß–ï–ö–õ–ò–°–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô STOCK-TRACKER

## ‚úÖ –ü–†–ò–û–†–ò–¢–ï–¢ 1: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (–°–ï–ì–û–î–ù–Ø)

### 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–∏–æ–¥ —É—á–µ—Ç–∞ –∑–∞–∫–∞–∑–æ–≤
- [ ] **–§–∞–π–ª:** `src/stock_tracker/services/product_service.py:315`
- [ ] **–ò–∑–º–µ–Ω–∏—Ç—å:** `ORDER_LOOKBACK_DAYS = 30` ‚Üí `ORDER_LOOKBACK_DAYS = 7`
- [ ] **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–∫–∞–∑—ã –≤ —Ç—Ä–µ–∫–µ—Ä–µ = –∑–∞–∫–∞–∑–∞–º –≤ WB —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ
- [ ] **–¢–µ—Å—Ç:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–∞–∫–∞–∑—ã –¥–ª—è `Its1_2_3/50g` ‚âà 65 (–∞ –Ω–µ 102)

### 2. –í–∫–ª—é—á–∏—Ç—å —Å–∫–ª–∞–¥ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å" –≤ –∞–≥—Ä–µ–≥–∞—Ü–∏—é –æ—Å—Ç–∞—Ç–∫–æ–≤
- [ ] **–§–∞–π–ª 1:** `src/stock_tracker/services/product_service.py:345-360`
  - –£–±—Ä–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä: `(wb_article_data['–°–∫–ª–∞–¥'] != '–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å')`
- [ ] **–§–∞–π–ª 2:** `src/stock_tracker/core/calculator.py:47-110`
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ `is_real_warehouse("–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å")` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `True`
- [ ] **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –û—Å—Ç–∞—Ç–∫–∏ –≤–∫–ª—é—á–∞—é—Ç —Å–∫–ª–∞–¥ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å"
- [ ] **–¢–µ—Å—Ç:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ—Å—Ç–∞—Ç–∫–∏ –¥–ª—è `Its1_2_3/50g` > 0 (–∞ –Ω–µ 0)

### 3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ warehouses —Å total_stock
- [ ] **–§–∞–π–ª:** `src/stock_tracker/services/product_service.py:450-480`
- [ ] **–ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É:** –î–æ–±–∞–≤–ª—è—Ç—å –í–°–ï —Å–∫–ª–∞–¥—ã –∏–∑ API –≤ `product.warehouses`
  ```python
  # –ë–´–õ–û: if wh_name and qty > 0
  # –°–¢–ê–õ–û: if wh_name  # –î–æ–±–∞–≤–ª—è—Ç—å –¥–∞–∂–µ –µ—Å–ª–∏ qty = 0
  ```
- [ ] **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `sum(wh.stock for wh in warehouses) == total_stock`
- [ ] **–¢–µ—Å—Ç:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å—É–º–º–∞ –ø–æ —Å–∫–ª–∞–¥–∞–º = total_stock –¥–ª—è –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤

---

## üü† –ü–†–ò–û–†–ò–¢–ï–¢ 2: –í–´–°–û–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (1-2 –î–ù–Ø)

### 4. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É–ª—É –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç–∏
- [ ] **–§–∞–π–ª:** `src/stock_tracker/services/product_service.py:610-616`
- [ ] **–¢–µ–∫—É—â–∞—è —Ñ–æ—Ä–º—É–ª–∞ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
  ```python
  product.turnover = int(product.total_stock / product.total_orders)
  ```
- [ ] **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞:**
  ```python
  PERIOD_DAYS = 7
  if product.total_orders > 0:
      orders_per_day = product.total_orders / PERIOD_DAYS
      product.turnover = round(product.total_stock / orders_per_day, 3)
  else:
      product.turnover = 0
  ```
- [ ] **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** `"31.000"` (—Å —Ç–æ—á–∫–æ–π, 3 –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π)
- [ ] **–¢–µ—Å—Ç:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç—å —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 5. –£–ª—É—á—à–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Å–∫–ª–∞–¥–∞–º
- [ ] **–§–∞–π–ª:** `compare_wb_vs_tracker_30_10.py:95-130`
- [ ] **–ü—Ä–æ–±–ª–µ–º–∞:** –°–∫–ª–∞–¥—ã –ø–∞—Ä—Å—è—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª—ã ‚Üí "–ß–µ—Ö–æ–≤ 1" ‚Üí ["–ß–µ—Ö–æ–≤", "1"]
- [ ] **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:
  - –í–∞—Ä–∏–∞–Ω—Ç 1: –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
  - –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å —Ç–∏–ø–∞ `|` –∏–ª–∏ `;`
  - –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∫–ª–∞–¥–∞
- [ ] **–¢–µ—Å—Ç:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —Å–∫–ª–∞–¥—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–∞—Ä—Å—è—Ç—Å—è

---

## üü° –ü–†–ò–û–†–ò–¢–ï–¢ 3: –†–ï–§–ê–ö–¢–û–†–ò–ù–ì (1 –ù–ï–î–ï–õ–Ø)

### 6. –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –∫–æ–¥
- [ ] **–£–¥–∞–ª–∏—Ç—å:** `operations.py::refresh_table_data()` (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è)
- [ ] **–£–¥–∞–ª–∏—Ç—å:** `product_service.py::sync_from_api_to_sheets()` (—É—Å—Ç–∞—Ä–µ–≤—à–∞—è)
- [ ] **–û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ:** `sync_from_dual_api_to_sheets()` (–∞–∫—Ç—É–∞–ª—å–Ω–∞—è)
- [ ] **–£–¥–∞–ª–∏—Ç—å backup —Ñ–∞–π–ª—ã:**
  - `product_service_backup_20251028_175833.py`
  - `dual_api_sync_patch.py` (–ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∫–æ–¥ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª)
- [ ] **–û–±–Ω–æ–≤–∏—Ç—å:** –í—Å–µ –≤—ã–∑–æ–≤—ã –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `sync_from_dual_api_to_sheets()`
- [ ] **–¢–µ—Å—Ç:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é

### 7. –£–ª—É—á—à–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Google Sheets
- [ ] **–§–∞–π–ª:** `src/stock_tracker/database/operations.py`
- [ ] **–î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–∏—Å–µ–ª:**
  ```python
  def format_number_with_spaces(num: int) -> str:
      """Format number with spaces for thousands separator."""
      return f"{num:,}".replace(',', ' ')
  ```
- [ ] **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫:**
  - –ö–æ–ª–æ–Ω–∫–∞ C (–ó–∞–∫–∞–∑—ã –≤—Å–µ–≥–æ): `3 184` –≤–º–µ—Å—Ç–æ `3184`
  - –ö–æ–ª–æ–Ω–∫–∞ D (–û—Å—Ç–∞—Ç–∫–∏ –≤—Å–µ–≥–æ): `3 184` –≤–º–µ—Å—Ç–æ `3184`
- [ ] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å multi-line —è—á–µ–π–∫–∏:**
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å—Ç—Ä–æ–∫ –≤ Google Sheets
  - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `wrap_strategy` –¥–ª—è —è—á–µ–µ–∫
- [ ] **–¢–µ—Å—Ç:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —á–∏—Å–ª–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –ø—Ä–æ–±–µ–ª–∞–º–∏

---

## üìä –ß–ï–ö–õ–ò–°–¢ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å `python update_table_fixed.py`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å `python compare_wb_vs_tracker_30_10.py`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è —É–º–µ–Ω—å—à–∏–ª–∏—Å—å

### –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- [ ] **–ó–∞–∫–∞–∑—ã:** –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ < 5% (–±—ã–ª–æ 24%)
- [ ] **–û—Å—Ç–∞—Ç–∫–∏:** –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ < 5% (–±—ã–ª–æ 92% –∞—Ä—Ç–∏–∫—É–ª–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏)
- [ ] **–û–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç—å:** –§–æ—Ä–º—É–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
- [ ] **–°–∫–ª–∞–¥—ã:** –í—Å–µ —Å–∫–ª–∞–¥—ã —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è, –≤–∫–ª—é—á–∞—è "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å"

---

## üìà –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
```
–ó–∞–∫–∞–∑—ã:     WB = 189 —à—Ç,   Tracker = 248 —à—Ç   (‚ùå -24%)
–û—Å—Ç–∞—Ç–∫–∏:    WB = 1195 —à—Ç,  Tracker = 1355 —à—Ç  (‚ùå -13%)
–¢–æ—á–Ω–æ—Å—Ç—å:   11/12 –∞—Ä—Ç–∏–∫—É–ª–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏         (‚ùå 92%)
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π (–æ–∂–∏–¥–∞–µ—Ç—Å—è):
```
–ó–∞–∫–∞–∑—ã:     WB ‚âà Tracker   (‚úÖ < 5% —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ)
–û—Å—Ç–∞—Ç–∫–∏:    WB ‚âà Tracker   (‚úÖ < 5% —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ)
–¢–æ—á–Ω–æ—Å—Ç—å:   0-1/12 –∞—Ä—Ç–∏–∫—É–ª–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏        (‚úÖ > 90% —Ç–æ—á–Ω–æ—Å—Ç—å)
```

---

## üöÄ –ü–û–†–Ø–î–û–ö –í–´–ü–û–õ–ù–ï–ù–ò–Ø

1. **–°–µ–≥–æ–¥–Ω—è (2-3 —á–∞—Å–∞):**
   - ‚úÖ –ü—É–Ω–∫—Ç—ã 1, 2, 3 (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

2. **–ó–∞–≤—Ç—Ä–∞ (3-4 —á–∞—Å–∞):**
   - ‚úÖ –ü—É–Ω–∫—Ç—ã 4, 5 (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

3. **–ù–∞ –Ω–µ–¥–µ–ª–µ (1-2 –¥–Ω—è):**
   - ‚úÖ –ü—É–Ω–∫—Ç—ã 6, 7 (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3)
   - –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –î–µ–ø–ª–æ–π –≤ production

---

## üìû –í–û–ü–†–û–°–´ –î–õ–Ø –£–¢–û–ß–ù–ï–ù–ò–Ø

- [ ] –ö–∞–∫–æ–π –ø–µ—Ä–∏–æ–¥ —É—á–µ—Ç–∞ –∑–∞–∫–∞–∑–æ–≤ –Ω—É–∂–µ–Ω? (7 –¥–Ω–µ–π –∏–ª–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π?)
- [ ] –ù—É–∂–Ω–æ –ª–∏ —É—á–∏—Ç—ã–≤–∞—Ç—å —Å–∫–ª–∞–¥ "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å"? (–î–∞, –¥–ª—è FBS —Ç–æ–≤–∞—Ä–æ–≤!)
- [ ] –ö–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å? (–¥–Ω–∏ –∏–ª–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç?)
- [ ] –ù—É–∂–Ω–æ –ª–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª —Å –ø—Ä–æ–±–µ–ª–∞–º–∏? (–¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è WB)

---

**–°—Ç–∞—Ç—É—Å:** üî¥ –û–∂–∏–¥–∞–µ—Ç –Ω–∞—á–∞–ª–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 30.10.2025  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot AI
