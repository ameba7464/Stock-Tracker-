# =============================================================================
# Wildberries Stock Tracker - Multi-Tenant Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# Never commit .env with real credentials to version control

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://user:password@localhost:5432/stock_tracker
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# -----------------------------------------------------------------------------
# Redis Configuration (Caching & Celery)
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/1

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# Secret key for JWT signing (generate with: openssl rand -hex 32)
SECRET_KEY=your-secret-key-here-change-in-production

# Fernet encryption key for credentials (generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())")
FERNET_KEY=your-fernet-key-here-change-in-production

# JWT token expiration
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# Password hashing rounds (higher = more secure but slower)
BCRYPT_ROUNDS=12

# -----------------------------------------------------------------------------
# Legacy Wildberries API Configuration (for backward compatibility)
# -----------------------------------------------------------------------------
# Get your API key from Wildberries seller dashboard
WILDBERRIES_API_KEY=your_api_key_here

# Wildberries API base URL (shouldn't need to change)
WILDBERRIES_BASE_URL=https://seller-analytics-api.wildberries.ru

# API timeout in seconds
WILDBERRIES_API_TIMEOUT=30

# API rate limiting (requests per minute)
WILDBERRIES_RATE_LIMIT=60

# -----------------------------------------------------------------------------
# Google Sheets API Configuration  
# -----------------------------------------------------------------------------
# Path to your Google service account JSON key file
GOOGLE_SERVICE_ACCOUNT_KEY_PATH=./config/service-account.json

# Your Google Sheet ID (from the URL)
# Example: https://docs.google.com/spreadsheets/d/YOUR_SHEET_ID/edit
GOOGLE_SHEET_ID=your_sheet_id_here

# Sheet name/tab (default: "Sheet1")
GOOGLE_SHEET_NAME=Sheet1

# Batch size for Google Sheets operations (for performance)
GOOGLE_SHEETS_BATCH_SIZE=100

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Directory for log files
LOG_DIR=./logs

# Sync schedule (cron format) - default: daily at 00:00
# Format: "minute hour day month weekday"
SYNC_SCHEDULE=0 0 * * *

# Timezone for scheduling (default: UTC)
TIMEZONE=UTC

# Enable/disable automatic sync (true/false)
AUTO_SYNC_ENABLED=true

# -----------------------------------------------------------------------------
# Performance Configuration
# -----------------------------------------------------------------------------
# Maximum number of products to process in one sync
MAX_PRODUCTS_PER_SYNC=100

# Retry configuration for failed API calls
API_RETRY_COUNT=3
API_RETRY_DELAY=1

# Maximum concurrent API requests
MAX_CONCURRENT_REQUESTS=5

# -----------------------------------------------------------------------------
# API Configuration
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# -----------------------------------------------------------------------------
# Monitoring & Error Tracking
# -----------------------------------------------------------------------------
# Sentry DSN for error tracking (optional)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=stock-tracker@1.0.0
SENTRY_TRACES_SAMPLE_RATE=0.1

# Prometheus metrics (no config needed, endpoint: /metrics)

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# Global rate limit (requests per minute)
RATE_LIMIT_GLOBAL=1000
RATE_LIMIT_GLOBAL_WINDOW=60

# Per-tenant rate limit (requests per minute)
RATE_LIMIT_TENANT=100
RATE_LIMIT_TENANT_WINDOW=60

# -----------------------------------------------------------------------------
# Stripe Billing Configuration
# -----------------------------------------------------------------------------
# Stripe API keys (get from https://dashboard.stripe.com/apikeys)
STRIPE_API_KEY=sk_test_your_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here

# Stripe webhook secret (for webhook signature verification)
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Stripe price IDs for subscription plans (from Stripe Dashboard)
STRIPE_PRICE_STARTER=price_starter_monthly_id
STRIPE_PRICE_PRO=price_pro_monthly_id
STRIPE_PRICE_ENTERPRISE=price_enterprise_monthly_id

# -----------------------------------------------------------------------------
# Development/Debug Configuration
# -----------------------------------------------------------------------------
# Environment: development, staging, production
ENVIRONMENT=development

# Set to true for development mode (more verbose logging)
DEBUG=false

# Dry run mode - don't actually update sheets (true/false)
DRY_RUN=false

# Mock API responses for testing (true/false)
MOCK_API=false

# -----------------------------------------------------------------------------
# PostgreSQL Backup Configuration (Yandex Object Storage)
# -----------------------------------------------------------------------------
# Yandex Object Storage S3-compatible endpoint
S3_ENDPOINT=https://storage.yandexcloud.net

# Bucket name for backups (create in Yandex Cloud Console)
S3_BACKUP_BUCKET=your-backup-bucket-name

# Access keys (create service account with storage.editor role)
S3_ACCESS_KEY=YCAJExxxxxxxxxxxxxxxxxx
S3_SECRET_KEY=YCxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# S3 region
S3_REGION=ru-central1

# Number of days to keep backups (older will be automatically deleted)
BACKUP_RETENTION_DAYS=7

# Telegram chat ID for backup notifications (optional)
# Use the same bot as TELEGRAM_BOT_TOKEN, just add your chat ID
TELEGRAM_BACKUP_CHAT_ID=